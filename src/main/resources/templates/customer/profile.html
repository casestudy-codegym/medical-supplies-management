<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security" lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Thông tin khách hàng</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/userProfile.css}">
</head>

<body>
<!-- Header -->
<div sec:authorize="hasRole('CUSTOMER')" th:replace="~{layout/userHeader :: header}"></div>
<div sec:authorize="!hasRole('CUSTOMER')" th:replace="~{layout/header :: header}"></div>

<div class="cus-container" th:if="${customer != null}">
    <h2 class="cus-title">Thông tin khách hàng</h2>

    <div class="cus-profile">
        <img th:src="${customer.avatarUrl}" alt="Avatar" class="cus-avatar"/>

        <div class="cus-profile-info">
            <div class="cus-info-group">
                <span class="cus-label">Tên tài khoản:</span>
                <span class="cus-value" th:text="${customer.username}">username</span>
            </div>
            <div class="cus-info-group">
                <span class="cus-label">Mật khẩu:</span>
                <span class="cus-value">**************</span>
            </div>
            <div class="cus-info-group">
                <span class="cus-label">Họ và tên:</span>
                <span class="cus-value" th:text="${customer.name}">Nguyễn Văn A</span>
            </div>
            <div class="cus-info-group">
                <span class="cus-label">Địa chỉ:</span>
                <span class="cus-value" th:text="${customer.address}">123 Đường Lê Lợi</span>
            </div>
            <div class="cus-info-group">
                <span class="cus-label">Số điện thoại:</span>
                <span class="cus-value" th:text="${customer.phone}">0901234567</span>
            </div>
            <div class="cus-info-group">
                <span class="cus-label">Email:</span>
                <span class="cus-value" th:text="${customer.email}">example@gmail.com</span>
            </div>
            <div class="cus-info-group">
                <span class="cus-label">Loại khách:</span>
                <span class="cus-value" th:text="${customer.type}">RETAIL</span>
            </div>
        </div>
    </div>

    <div class="cus-actions">
        <button onclick="window.history.back()">Quay về</button>
        <button onclick="window.location.href='/customer/edit'">Cập nhật thông tin</button>
        <!-- Mở modal thay đổi mật khẩu -->
        <button type="button" data-bs-toggle="modal" data-bs-target="#changePasswordModal">
            Thay đổi mật khẩu
        </button>
    </div>
</div>

<!-- Modal đổi mật khẩu -->
<div th:replace="~{auth/changePassword :: changePasswordModal}"></div>

<!-- Footer -->
<div th:replace="layout/footer :: footer"></div>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
    window.passwordChangedFlag = /*[[${passwordChanged}]]*/ false;
</script>
<script th:src="@{/js/changePasswordConfirm.js}"></script>

</body>
</html>
